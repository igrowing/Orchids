{% load django_tables2 %}
<!DOCTYPE html>
<html>
<head>
	<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
	<style type="text/css">
	/* animated spoiler CSS by Bloggersentral.com, modified by iGrowing */
	.spoilerbutton {display:inline;margin:3px 0;}
	.spoiler {overflow:hidden;}
	.spoiler > div {-webkit-transition: all 0.4s ease;-moz-transition: margin 0.4s ease;-o-transition: all 0.4s ease;transition: margin 0.4s ease;}
	.spoilerbutton[name="Show"] + .spoiler > div {margin-top:-100%;}
	.spoilerbutton[name="Hide"] + .spoiler {padding:5px;}
	</style>
	<style id="Orchids_care_4027_Styles">
	body {
background: rgb(247,251,252);
background: -moz-radial-gradient(center, ellipse cover, rgba(247,251,252,1) 0%, rgba(217,237,242,1) 62%, rgba(173,217,228,1) 100%);
background: -webkit-radial-gradient(center, ellipse cover, rgba(247,251,252,1) 0%,rgba(217,237,242,1) 62%,rgba(173,217,228,1) 100%);
background: radial-gradient(ellipse at center, rgba(247,251,252,1) 0%,rgba(217,237,242,1) 62%,rgba(173,217,228,1) 100%);
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f7fbfc', endColorstr='#add9e4',GradientType=1 );
}
	<!--table
	   {mso-displayed-decimal-separator:"\.";
	   mso-displayed-thousand-separator:"\,";}
	.xl154027
	   {padding-top:1px;
	   padding-right:1px;
	   padding-left:1px;
	   mso-ignore:padding;
	   color:black;
	   font-size:12.0pt;
	   font-weight:400;
	   font-style:normal;
	   text-decoration:none;
	   font-family:Calibri, sans-serif;
	   mso-font-charset:0;
	   mso-number-format:General;
	   text-align:general;
	   vertical-align:bottom;
	   mso-background-source:auto;
	   mso-pattern:auto;
	   white-space:nowrap;}
	.xl654027
	   {padding-top:1px;
	   padding-right:1px;
	   padding-left:1px;
	   mso-ignore:padding;
	   color:black;
	   font-size:12.0pt;
	   
	   font-style:normal;
	   text-decoration:none;
	   font-family:Calibri, sans-serif;
	   mso-font-charset:0;
	   mso-number-format:General;
	   text-align:left;
	   vertical-align:top;
	   border:.5pt solid #366092;
	   mso-background-source:auto;
	   mso-pattern:auto;
	   white-space:normal;}
	.xl664027
	   {padding-top:1px;
	   padding-right:1px;
	   padding-left:1px;
	   mso-ignore:padding;
	   color:black;
	   font-size:12.0pt;
	   
	   font-style:normal;
	   text-decoration:none;
	   font-family:Calibri, sans-serif;
	   mso-font-charset:0;
	   mso-number-format:General;
	   text-align:center;
	   vertical-align:top;
	   border:.5pt solid #366092;
	   background:#FABF8F;
	   mso-pattern:black none;
	   white-space:normal;}
	.xl674027
	   {padding-top:1px;
	   padding-right:1px;
	   padding-left:1px;
	   mso-ignore:padding;
	   color:black;
	   font-size:12.0pt;
	   
	   font-style:normal;
	   text-decoration:none;
	   font-family:Calibri, sans-serif;
	   mso-font-charset:0;
	   mso-number-format:General;
	   text-align:center;
	   vertical-align:top;
	   border:.5pt solid #366092;
	   background:#C5D9F1;
	   mso-pattern:black none;
	   white-space:normal;}
	.xl684027
	   {padding-top:1px;
	   padding-right:1px;
	   padding-left:1px;
	   mso-ignore:padding;
	   color:black;
	   font-size:12.0pt;
	   
	   font-style:normal;
	   text-decoration:none;
	   font-family:Calibri, sans-serif;
	   mso-font-charset:0;
	   mso-number-format:General;
	   text-align:center;
	   vertical-align:top;
	   border:.5pt solid #366092;
	   background:#FDE9D9;
	   mso-pattern:black none;
	   white-space:normal;}
	.xl694027
	   {padding-top:1px;
	   padding-right:1px;
	   padding-left:1px;
	   mso-ignore:padding;
	   color:black;
	   font-size:12.0pt;
	   
	   font-style:normal;
	   text-decoration:none;
	   font-family:Calibri, sans-serif;
	   mso-font-charset:0;
	   mso-number-format:General;
	   text-align:center;
	   vertical-align:top;
	   border:.5pt solid #366092;
	   background:#8DB4E2;
	   mso-pattern:black none;
	   white-space:normal;}
	.xl704027
	   {padding-top:1px;
	   padding-right:1px;
	   padding-left:1px;
	   mso-ignore:padding;
	   color:black;
	   font-size:12.0pt;
	   
	   font-style:normal;
	   text-decoration:none;
	   font-family:Calibri, sans-serif;
	   mso-font-charset:0;
	   mso-number-format:General;
	   text-align:center;
	   vertical-align:top;
	   border:.5pt solid #366092;
	   mso-background-source:auto;
	   mso-pattern:auto;
	   white-space:normal;}
	.xl714027
	   {padding-top:1px;
	   padding-right:1px;
	   padding-left:1px;
	   mso-ignore:padding;
	   color:black;
	   font-size:12.0pt;
	   font-weight:400;
	   font-style:normal;
	   text-decoration:none;
	   font-family:Calibri, sans-serif;
	   mso-font-charset:0;
	   mso-number-format:General;
	   text-align:center;
	   vertical-align:bottom;
	   mso-background-source:auto;
	   mso-pattern:auto;
	   white-space:nowrap;}
	-->
	</style>
	<title>&#10046; OrchidCare - always alive</title>
</head>
<body>
<center>
<table width="60%"><tr>
<td><h1><font color="#ff33cc">&#10046;</font> OrchidCare <font color="#cc99ff">&#10046;</font></h1></td>
    <td align="right"><a href="/sysinfo/">System Information</a></td>
</tr></table>
<hr>
	<div align="center" id="Orchids_care_4027">
        <h2>Status panel</h2>
		<table border="0" cellpadding="0" cellspacing="0" style='border-collapse:collapse;width:500pt'>
			<col>
			<col class="xl714027" style='mso-width-source:userset; mso-width-alt:2304;'>
			<tr>
				<td class="xl654027" height="21" style='background:#DCE6F1;mso-pattern:#DCE6F1 none'>Temp, &#176;C</td>
				<td class="xl694027" style='background:#5A8AC6;'><6</td>
				<td class="xl674027" colspan="3" style='background:#88AAD6;'>6-17</td>
				<td class="xl684027" colspan="2" style='background:#DDE6F4;'>17-25</td>
				<td class="xl684027" colspan="6" style='background:#FBD5D8;'>25-28</td>
				<td class="xl664027" colspan="4" style='background:#FBB8BA;'>28-36</td>
				<td class="xl664027" style='background:#F8696B;'>>36</td>
			</tr>
			<tr>
				<td class="xl654027" height="21" style='background:#B8CCE4;mso-pattern:#B8CCE4 none'>rH, %</td>
				<td class="xl704027">~</td>
				<td class="xl704027" style='background:#F8696B;'><40</td>
				<td class="xl704027" style='background:#FFEB84;'>40-80</td>
				<td class="xl704027" style='background:#63BE7B;'>>80</td>
				<td class="xl704027" style='background:#F8696B;'><40</td>
				<td class="xl704027" style='background:#FFEB84;'>>40</td>
				<td class="xl704027" colspan="2" style='background:#F8696B;'><40</td>
				<td class="xl704027" colspan="2" style='background:#FFEB84;'>40-80</td>
				<td class="xl704027" colspan="2" style='background:#63BE7B;'>>80</td>
				<td class="xl704027" colspan="2" style='background:#F8696B;'><80</td>
				<td class="xl704027" colspan="2" style='background:#63BE7B;'>>80</td>
				<td class="xl704027">~</td>
			</tr>
			<tr>
				<td class="xl654027" height="21" style='background:#DCE6F1;mso-pattern:#DCE6F1 none'>Wind, m/s</td>
				<td class="xl704027">~</td>
				<td class="xl704027">~</td>
				<td class="xl704027">~</td>
				<td class="xl704027">~</td>
				<td class="xl704027">~</td>
				<td class="xl704027">~</td>
				<td class="xl704027">0</td>
				<td class="xl704027">&ge;2</td>
				<td class="xl704027">0</td>
				<td class="xl704027">&ge;2</td>
				<td class="xl704027">0</td>
				<td class="xl704027">&ge;2</td>
				<td class="xl704027">0</td>
				<td class="xl704027">&ge;2</td>
				<td class="xl704027">0</td>
				<td class="xl704027">&ge;2</td>
				<td class="xl704027">~</td>
			</tr>
			<tr>
				<td class="xl654027" height="21" style='background:#B8CCE4;mso-pattern:#B8CCE4 none'>Detected</td>
                {% for value in statuses %}
                    {% if value %}
                        <td class="xl704027" style='background:#FFEB84;'> &#10004;
                    {% else %}
                        <td class="xl704027"> &nbsp;
                    {% endif %}
                    </td>
                {% endfor %}
			</tr>
		</table>
	</div>

<hr>
    <h2>Control panel</h2>
<form action="" method="post" onsubmit="return validate();"> {% csrf_token %}
<script>
function validate() {
  // Pop up user confirmation when:
  // One or more checkboxes are checked
  // AND
  // No timer activated (0 in time field).

  inputs = document.getElementsByTagName("input");
  for (var i=0; i < inputs.length; i++) {
      if (inputs[i].type == 'checkbox' && inputs[i].checked && document.getElementById('id_time').value == 0)  {
        // Return user decision on first checked checkbox.
        return confirm('The time is set to 0.\nThis means your command will stop automation until you shut off all actuators manually.\n\nAre you sure?');
      }
  }
  // Return null (means true) if no checkboxes checked or time > 0.
}
</script>
{% if messages %}
<ul class="messages">
    {% for message in messages %}
    <li{% if message.tags %} class="{{ message.tags }}"{% endif %}> {{ message }} </li>
    {% endfor %}
</ul>
{% endif %}

<!--  <label for="mist"><input type="checkbox" name="mist" value="mist" id="mist"> Mist</label><br>
  <label for="drip"><input type="checkbox" name="drip" value="drip" id="drip"> Drip</label><br>
  <label for="fan"><input type="checkbox" name="fan" value="fan" id="fan"> Fan</label><br>
  <label for="light"><input type="checkbox" name="light" value="light" id="light"> Light</label><br>
  <label for="heat"><input type="checkbox" name="heat" value="heat" id="heat"> Heat</label><br>
  -->
<!--
  <label for="mist"><input type="checkbox" name="actions" value="mist" id="mist"> Mist</label><br>
  <label for="drip"><input type="checkbox" name="actions" value="drip" id="drip"> Drip</label><br>
  <label for="fan"><input type="checkbox" name="actions" value="fan" id="fan"> Fan</label><br>
  <label for="light"><input type="checkbox" name="actions" value="light" id="light"> Light</label><br>
  <label for="heat"><input type="checkbox" name="actions" value="heat" id="heat"> Heat</label><br>
-->
    <table width="900">
        <tr>
            <td valign="top">
                <b>Actuators are:</b>
                {% for key, value in actuators.items %}
                    <p><li>
                        {{key}}: {{ value }}
                    </li></p>
                {% endfor %}
            </td> <td>
            </td><td valign="top">
            {% if actionList %}
                <b>Next actions:</b><p>
                <table summary="Next actions:">
                <tr><th>What</th><th>When</th><th>Will be</th>
                {% for a, b, c in actionList %}
                    <tr><td>{{ a }}</td><td>{{ c }}</td><td>{{ b }}</td></tr>
                {% endfor %}
                </table></p>
            {% endif %}
            {% if timerList %}
                <hr><h4>Timer actions:</h4><p>
                <table summary="Timer actions:">
                <tr><th>What</th><th>When</th><th>Will be</th>
                {% for a, b, c in timerList %}
                    <tr><td>{{ a }}</td><td>{{ c }}</td><td>{{ b }}</td></tr>
                {% endfor %}
                </table></p>
            {% endif %}
            </td> <td>
            </td><td valign="top">
            <b>Manual control: <input class="spoilerbutton" type="button" name='Show' title='Show/Hide manual controls' value="Give me control!" onclick="this.name=this.name=='Show'?'Hide':'Show';">
		<div class="spoiler"><div>
	            {{ form.as_p }}
            	<input type="submit" value="Ready? Go!">
		</div></div></b>
            </td>
        </tr>
    </table>
</form>

<hr>
<h2>Data panel</h2>
<h3><table width="50%"><tr><td>
Showing: Sensors</td><td align="right"><a href="actions/">Show Actions</a></td></tr>
<tr><td>Total {{total}} records.</td><td> </td></tr></table>
</h3>

{% if paginator.number == 1 %}
<input class="spoilerbutton" type="button" name='Show' title='Show/Hide sensors data' value="Raw sensors data" onclick="this.name=this.name=='Show'?'Hide':'Show';">
<div class="spoiler"><div>
{% endif %}
{% if table %}
    <div class="pagination">
        <span class="step-links">
            <a href="/">|<< First</a>&nbsp;&nbsp;
            {% if paginator.has_previous %}
                <a href="?page={{ paginator.previous_page_number }}">< Previous</a>&nbsp;&nbsp;
            {% endif %}

            <span class="current">
                Page {{ paginator.number }} of {{ paginator.paginator.num_pages }}.&nbsp;&nbsp;
            </span>

            {% if paginator.has_next %}
                <a href="?page={{ paginator.next_page_number }}">Next ></a>&nbsp;&nbsp;
            {% endif %}
            <a href="?page={{ paginator.paginator.num_pages }}">Last >>|</a>
        </span>
    </div>

    {% render_table table %}

    <div class="pagination">
        <span class="step-links">
            <a href="?page=1">|<< First</a>&nbsp;&nbsp;
            {% if paginator.has_previous %}
                <a href="?page={{ paginator.previous_page_number }}">< Previous</a>&nbsp;&nbsp;
            {% endif %}

            <span class="current">
                Page {{ paginator.number }} of {{ paginator.paginator.num_pages }}.&nbsp;&nbsp;
            </span>

            {% if paginator.has_next %}
                <a href="?page={{ paginator.next_page_number }}">Next ></a>&nbsp;&nbsp;
            {% endif %}
            <a href="?page={{ paginator.paginator.num_pages }}">Last >>|</a>
        </span>
    </div>
{% if paginator.number == 1 %}
</div></div>
{% endif %}
<br><hr>
<a target="_blank" href="http://github.com/igrowing/orchids/wiki">How does this work</a> &copy; <a target="_blank" href="http://github.com/igrowing">iGrowing</a>
<br></center>
{% comment %}
    <ul>
        {% for object in table %}
            <li>
                {{object.date}}: {{ object.t_amb }} {{ object.t_obj }} {{ object.rh }} {{ object.lux }} {{ object.hpa }} {{ object.wind }} {{ object.water }}
            </li>
        {% endfor %}
    </ul>
{% endcomment %}
{% else %}
    <p>No polls are available.</p>
{% endif %}
</body>
</html>
